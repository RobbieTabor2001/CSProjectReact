{"ast":null,"code":"var _jsxFileName = \"/Users/robbietabor/Workspace/2023Fall/WebDev/ProjectReact/src/project/users/details.js\",\n  _s = $RefreshSig$();\nimport * as client from \"./client\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport * as followsClient from \"../follows/client\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction UserDetails() {\n  _s();\n  const [user, setUser] = useState(null);\n  // const [currentUser, setCurrentUser] = useState(null); // [1\n  const {\n    currentUser\n  } = useSelector(state => state.usersReducer); // [2\n  const [followers, setFollowers] = useState([]);\n  const [following, setFollowing] = useState([]);\n  const {\n    id\n  } = useParams();\n  const fetchUser = async () => {\n    const user = await client.findUserById(id);\n    setUser(user);\n    fetchFollowers(user._id);\n    fetchFollowing(user._id);\n  };\n  // const fetchCurrentUser = async () => {\n  //   const user = await client.account();\n  //   setCurrentUser(user);\n  // };\n  const follow = async () => {\n    await followsClient.createUserFollowsUser(currentUser._id, user._id);\n  };\n  const fetchFollowers = async userId => {\n    const followers = await followsClient.findUsersFollowingUser(userId);\n    setFollowers(followers);\n  };\n  const fetchFollowing = async userId => {\n    const following = await followsClient.findUsersFollowedByUser(userId);\n    setFollowing(following);\n  };\n  const alreadyFollowing = () => {\n    return followers.find(follows => follows.follower._id === currentUser._id);\n  };\n  useEffect(() => {\n    fetchUser();\n    // fetchCurrentUser();\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [(currentUser === null || currentUser === void 0 ? void 0 : currentUser._id) !== id && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: alreadyFollowing() ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-danger float-end\",\n        children: \"Unfollow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: follow,\n        className: \"btn btn-primary float-end\",\n        children: \"Follow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"User Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) === \"ADMIN\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: e => setUser({\n          ...user,\n          username: e.target.value\n        }),\n        type: \"text\",\n        value: user === null || user === void 0 ? void 0 : user.username,\n        className: \"form-control\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => client.updateUser(user._id, user),\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), (currentUser === null || currentUser === void 0 ? void 0 : currentUser.role) !== \"ADMIN\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [\"Username: \\\"\", user === null || user === void 0 ? void 0 : user.username]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: JSON.stringify(user, null, 2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: JSON.stringify(currentUser, null, 2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Followers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-group\",\n      children: followers.map(follows => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/project/users/${follows.follower._id}`,\n        className: \"list-group-item\",\n        children: [follows.follower.firstName, \" \", follows.follower.lastName, \" (@\", follows.follower.username, \")\"]\n      }, follows._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Following\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list-group\",\n      children: following.map(follows => /*#__PURE__*/_jsxDEV(Link, {\n        to: `/project/users/${follows.followed._id}`,\n        className: \"list-group-item\",\n        children: [follows.followed.firstName, \" \", follows.followed.lastName, \" (@\", follows.followed.username, \")\"]\n      }, follows._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(UserDetails, \"pXFvdFREIdhS7YUsYKLNKNNia5I=\", false, function () {\n  return [useSelector, useParams];\n});\n_c = UserDetails;\nexport default UserDetails;\nvar _c;\n$RefreshReg$(_c, \"UserDetails\");","map":{"version":3,"names":["client","React","useState","useEffect","Link","useParams","followsClient","useSelector","jsxDEV","_jsxDEV","Fragment","_Fragment","UserDetails","_s","user","setUser","currentUser","state","usersReducer","followers","setFollowers","following","setFollowing","id","fetchUser","findUserById","fetchFollowers","_id","fetchFollowing","follow","createUserFollowsUser","userId","findUsersFollowingUser","findUsersFollowedByUser","alreadyFollowing","find","follows","follower","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","role","onChange","e","username","target","value","type","updateUser","JSON","stringify","map","to","firstName","lastName","followed","_c","$RefreshReg$"],"sources":["/Users/robbietabor/Workspace/2023Fall/WebDev/ProjectReact/src/project/users/details.js"],"sourcesContent":["import * as client from \"./client\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport * as followsClient from \"../follows/client\";\nimport { useSelector } from \"react-redux\";\nfunction UserDetails() {\n  const [user, setUser] = useState(null);\n  // const [currentUser, setCurrentUser] = useState(null); // [1\n  const { currentUser } = useSelector((state) => state.usersReducer); // [2\n  const [followers, setFollowers] = useState([]);\n  const [following, setFollowing] = useState([]);\n  const { id } = useParams();\n  const fetchUser = async () => {\n    const user = await client.findUserById(id);\n    setUser(user);\n    fetchFollowers(user._id);\n    fetchFollowing(user._id);\n  };\n  // const fetchCurrentUser = async () => {\n  //   const user = await client.account();\n  //   setCurrentUser(user);\n  // };\n  const follow = async () => {\n    await followsClient.createUserFollowsUser(currentUser._id, user._id);\n  };\n\n  const fetchFollowers = async (userId) => {\n    const followers = await followsClient.findUsersFollowingUser(userId);\n    setFollowers(followers);\n  };\n\n  const fetchFollowing = async (userId) => {\n    const following = await followsClient.findUsersFollowedByUser(userId);\n    setFollowing(following);\n  };\n\n  const alreadyFollowing = () => {\n    return followers.find(\n      (follows) => follows.follower._id === currentUser._id\n    );\n  };\n\n  useEffect(() => {\n    fetchUser();\n    // fetchCurrentUser();\n  }, [id]);\n  return (\n    <div className=\"container\">\n      {currentUser?._id !== id && (\n        <>\n          {alreadyFollowing() ? (\n            <button className=\"btn btn-danger float-end\">Unfollow</button>\n          ) : (\n            <button onClick={follow} className=\"btn btn-primary float-end\">\n              Follow\n            </button>\n          )}\n        </>\n      )}\n      <h1>User Details</h1>\n      {currentUser?.role === \"ADMIN\" && (\n        <>\n          <input\n            onChange={(e) => setUser({ ...user, username: e.target.value })}\n            type=\"text\"\n            value={user?.username}\n            className=\"form-control\"\n          />\n          <button onClick={() => client.updateUser(user._id, user)}>\n            Save\n          </button>\n        </>\n      )}\n      {currentUser?.role !== \"ADMIN\" && <>Username: \"{user?.username}</>}\n      <pre>{JSON.stringify(user, null, 2)}</pre>\n      <pre>{JSON.stringify(currentUser, null, 2)}</pre>\n      <h2>Followers</h2>\n      <div className=\"list-group\">\n        {followers.map((follows) => (\n          <Link\n            to={`/project/users/${follows.follower._id}`}\n            key={follows._id}\n            className=\"list-group-item\"\n          >\n            {follows.follower.firstName} {follows.follower.lastName} (@\n            {follows.follower.username})\n          </Link>\n        ))}\n      </div>\n      <h2>Following</h2>\n      <div className=\"list-group\">\n        {following.map((follows) => (\n          <Link\n            to={`/project/users/${follows.followed._id}`}\n            key={follows._id}\n            className=\"list-group-item\"\n          >\n            {follows.followed.firstName} {follows.followed.lastName} (@\n            {follows.followed.username})\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default UserDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}